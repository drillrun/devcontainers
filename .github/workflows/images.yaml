name: "validate, test, build and publish images"
on:
    push:
      branches: ["main"]
    pull_request:
      branches: ["main"]
    workflow_dispatch:
jobs:
    build:
      runs-on: ubuntu-latest
      continue-on-error: true
      strategy:
        matrix:
          image: ["alpine", "debian"]
          tag: ["minimal", "full"]
      steps:
        - uses: actions/checkout@v4
        - uses: devcontainers/ci@v0.3
          with:
            subFolder: images/${{ matrix.image }}/${{ matrix.tag }}
            imageName: ghcr.io/${{ github.repository_owner }}/${{ matrix.image }}
            imageTag: ${{ matrix.tag }}
            push: never